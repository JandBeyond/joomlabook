=== SEF URLs

Öffnen Sie die Beispielseite unseres Bauern in Ihrem Webbrowser,
navigieren Sie zur Unterseite _Obstsorten_ und werfen Sie einen Blick in
die Adresszeile Ihres Browsers. Dort sollten Sie eine URL finden können,
die in etwa _/index.php/obstsorten_ lautet. Diese Art URL, bei der man
aus der Adresse direkt auf den dort gezeigten Inhalt schließen kann,
nent sich _sprechende URL_ und ist sowohl für Nutzer als auch für
Suchmaschinen praktisch.

Das Gegenbeispiel wäre eine solch kryptische URL wie
_/index.php?option=com++_++content&view=categories&id=7&Itemid=104_. Was
verbirgt sich wohl dahinter? Der Pragmatiker würde sagen: „Klar, da
finde ich alle Kategorien (_categories_) der Elternkategorie mit der ID
_7_ der Inhaltskomponente (_com++_++content_), die im Menüeintrag
(_Itemid_) mit der ID _104_ verlinkt sind.“ Aber jetzt mal im Ernst:
Wirklich lesbar im Sinne von „Ich kann lesen, was mich erwartet“ sind
diese URLs nicht.

image:media/image10.png[media/image10,width=548,height=232]

BILD 13.5 Beispiel-URL einer Joomla!-Installation

Der Umstand, dass diese URLs für Menschen nicht lesbar sind, macht sie
auch für Suchmaschinen ungeeignet, da diese gezielt nach Suchbegriffen
in der URL der jeweiligen Seite suchen – mit anderen Worten: Wenn jemand
nach „Obstsorten“ sucht, wäre es für uns praktisch, wenn hier statt der
kryptischen Zeichenkette eine URL wie /obstsorten.html angezeigt werden
würde, da dies unser Ranking verbessert. Um dies zu bewerkstelligen,
bringt Joomla! ein System zur Generierung von genau diesen
_suchmaschinenfreundlichen URLs_ (kurz SEF URLs) mit, das standardmäßig
bereits aktiv ist und uns eine schöne URL generiert..

Die Konfiguration der URLs erfolgt über die globalen Einstellungen
unserer Joomla!-Installation, die wir über den Link System ++>++
Konfiguration im Backend erreichen. Dort finden wir in der rechten
Spalte des Reiters _Site_ die Parameter für die
_Suchmaschinenoptimierung_.

image:media/image11.png[media/image11,width=548,height=304]

BILD 13.6 Suchmaschinenoptimierungs-Parameter

In Kapitel 6.4, haben wir die einzelnen Parameter zwar schon kurz
kennengelernt, es bietet sich aber an, die verschiedenen Parameter und
ihre Auswirkungen nun nochmals genauer zu betrachten. In der
nachfolgenden Tabelle habe ich eine Auflistung der verschiedenen
Parameter und ihre Auswirkung auf URLs zusammengestellt.

[width="100%",cols="49%,51%",]
|===
|Aktivierte Parameter |URL

|keine |_/index.php?option=com++_++content&view= +
categories&id=7..._

|_Suchmaschinenfreundliche URL_ |_/index.php/obstsorten/aepfel_

|_Suchmaschinenfreundliche URL, Dateiendung an URL anfügen_
|_/index.php/obstsorten/aepfel.html_

|_Suchmaschinenfreundliche URL, Dateiendung an URL anfügen,
Unicode-Aliasse_ |_/index.php/obstsorten/äpfel.html_

|_Suchmaschinenfreundliche URL, URL-Rewrite nutzen_
|_/obstsorten/aepfel_

|_Suchmaschinenfreundliche URL, URL-Rewrite nutzen, Dateiendung an URL
anfügen_ |_/obstsorten/aepfel.html_

|_Suchmaschinenfreundliche URL, URL-Rewrite nutzen, Dateiendung an URL
anfügen, Unicode-Aliasse_ |_/obstsorten/äpfel.html_
|===

==== URL-Rewriting

Jeder der Parameter beeinflusst also die generierte URL, wobei die
wichtigste Entscheidung die Nutzung oder Nichtnutzung des
_URL-Rewriting_ ist. Dieses entfernt das störende _/index.php_ aus der
URL, wodurch die entstehenden URLs besser zu merken sind. Wie aber
funktioniert die Technik dahinter? Werden tatsächlich Ordner und
HTML-Dateien im Dateisystem erzeugt? Die Antwort ist natürlich ein Nein
– stattdessen nutzt der _URL-Rewriting_-Modus eine Funktion von gängigen
Webservern (Apache, Nginx, Lighttpd, IIS), die einen bestimmten
URL-Aufruf an eine andere Datei weiterleiten. Werfen Sie beispielsweise
einen Blick in die Datei _htaccess.txt_, die Sie im
Joomla!-Hauptverzeichnis oder in gekürzter Form in Listing 13.1 finden.

LISTING 13.1 Durch Joomla! mitgelieferte htaccess.txt

IndexIgnore ++*++

Options -Indexes

Options {plus}FollowSymlinks

RewriteEngine On

RewriteCond %++{++QUERY++_++STRING}
base64++_++encode++[++^(++]*\++(++[++^)++]*\++) ++[++OR++]++

RewriteCond %++{++QUERY++_++STRING}
(++<|++%3C)(++[++^s++]*++s){plus}cript.++*++(++>|++%3E) ++[++NC,OR++]++

RewriteCond %++{++QUERY++_++STRING}
GLOBALS(=++|\[|\++%++[++0-9A-Z++]{++0,2}) ++[++OR++]++

RewriteCond %++{++QUERY++_++STRING}
++_++REQUEST(=++|\[|\++%++[++0-9A-Z++]{++0,2})

RewriteRule .++*++ index.php ++[++F++]++

RewriteBase /

RewriteRule .++*++ -
++[++E=HTTP++_++AUTHORIZATION:%++{++HTTP:Authorization}++]++

RewriteCond %++{++REQUEST++_++URI} !^/index++\++.php

RewriteCond %++{++REQUEST++_++FILENAME} !-f

RewriteCond %++{++REQUEST++_++FILENAME} !-d

RewriteRule .++*++ index.php ++[++L++]++

Hier finden wir im letzten Textblock (nach RewriteBase) eine Reihe von
Parametern für das Apache-Modul _mod++_++rewrite_. Sie weisen das Modul
an, alle Anfragen an den Webserver, die eine Datei (RewriteCond
%++{++REQUEST++_++FILENAME} !-f ) oder einen Ordner (RewriteCond
%++{++REQUEST++_++FILENAME} !-d) abrufen wollen, die bzw. der nicht
existiert, an die Datei _index.php_ (RewriteRule .++*++ index.php
++[++L++]++) weiterzugeben. Joomla! kann diese ursprüngliche Anfrage
dann auswerten und so die korrekte interne URL aufrufen. Durch
URL-Rewriting werden also alle Anfragen an nicht vorhandene Dateien an
Joomla! weitergeleitet, sodass geprüft werden kann, ob eine zugehörige
interne Seite existiert.

Um diese Funktion nutzen zu können, müssen mehrere Voraussetzungen
erfüllt sein:

[arabic]
. Es muss ein Webserver verwendet werden, der über eine entsprechende
Rewriting-Funktion verfügt: _Nginx, Apache, IIS, Lighttpd_ – den von
Ihrem Hoster verwendeten Webserver sollten Sie erfragen, wenn Sie sich
unsicher sind.
. Die Rewriting-Funktion muss aktiviert sein. In einigen Fällen lässt
sich dies über die Ausgabe der _PHP-Informationen_ (SYSTEM ++>++
Systeminformationen) auslesen, jedoch stellt dies eher die Ausnahme dar
(siehe Bild 13.7). Im Zweifelsfalle hilft auch hier eine Anfrage beim
Hoster.
. Der Hoster muss die Nutzung eigener Steuerdateien für den Webserver
(_.htaccess_ für den _Apache_, _web.config_ für den _IIS_) erlauben.
Auch hier hilft der Hoster weiter.

Sind all diese Voraussetzungen erfüllt, so reicht es im Normalfall, die
_htaccess.txt_ im Joomla!-Verzeichnis in _.htaccess_ umzubenennen,
sodass die Datei mit den darin enthaltenen Rewrite-Regeln aktiviert
wird. Für den _IIS_ muss hier natürlich die Datei _webconfig.txt_ in
_web.config_ umbenannt werden, da dieser mit _.htaccess_-Dateien nichts
anfangen kann.

image:media/image13.png[C:++\++Users++\++hwunder++\++Desktop++\++rtf++\++13++\++Bild639.PNG,width=548,height=246]

BILD 13.7 _mod++_++rewrite_ in der Auflistung der Loaded Modules des
Apache

Anschließend können Sie die _URL-Rewriting_-Funktion in der globalen
_Konfiguration_ aktivieren.

[width="99%",cols="14%,86%",options="header",]
|===
|CHV++_++BOX++_++ID++_++01 |
|icn001 a|
*Praxistipp:* Bei vielen Hostern kommt es an dieser Stelle immer wieder
zu Schwierigkeiten im Zusammenhang mit dem _URL-Rewriting_, die sich in
zwei Fälle einteilen lassen:

Nach dem Umbenennen der _.htaccess_ erzeugt die Seite beim Aufruf einen
Fehler 500. Hier können Sie im ersten Schritt versuchen, den Eintrag
Options {plus}FollowSymLinks in der _.htaccess_ mit einer Raute
auszukommentieren: #Options {plus}FollowSymLinks

Sollte sich der gewünschte Erfolg noch nicht einstellen, so liegt das
daran, dass der Hoster die eben genannten Voraussetzungen nicht erfüllt.
Hier hilft kein Basteln, sondern nur eine Konfigurationsänderung, die
ausschließlich vom Hoster vorgenommen werden kann.

Der zweite Fall erzeugt einen Fehler 404, woraufhin Sie versuchen
sollten, den Eintrag RewriteBase in der _.htaccess_ zu
einzukommentieren. Reicht dies immer noch nicht, so liegt Ihre
Joomla!-Installation vermutlich in einem Unterverzeichnis, das Sie dann
zur RewriteBase hinzufügen müssen: RewriteBase /Unterverzeichnis/

|===

==== Das Duplicate-Content-Problem

Wenn Sie sich ein wenig mit dem Thema der Suchmaschinenoptimierung
auseinandersetzen, werden Sie irgendwann zwangsläufig auf den Begriff
_Duplicate Content_ treffen, der den Fall beschreibt, dass ein
bestimmter Inhalt über mehrere URLs erreichbar ist. Dabei wird jedoch
gerne vernachlässigt, dass es streng genommen mehrere Arten von
_Duplicate Content_ gibt:

[arabic]
. Ein identischer Inhalt ist unter verschiedenen *Domains* erreichbar:
Dies passiert beispielsweise, wenn man versehentlich oder absichtlich
eine Kopie der Joomla!-Installation unter einer anderen, öffentlich
einsehbaren Domain ablegt oder diese Domain auf die bestehende
Installation routet. Dieser Fall entspricht der Art von Duplicate
Content, die unter Umständen von Suchmaschinen abgestraft wird.

[arabic, start=4]
. Ein identischer Inhalt ist unter mehreren *Subdomains* erreichbar:
Bekanntestes Beispiel ist die Erreichbarkeit der Seite unter
_www.domain.tld_ und _domain.tld_, also mit und ohne das Präfix _www_.
Dieser Fall wird von Suchmaschinen nicht gezielt negativ bewertet, es
kann jedoch für die Suchmaschinenoptimierung ratsam sein, die URL ohne
www auf die URL mit www weiterzuleiten.
. Ein identischer Inhalt ist innerhalb einer Domain über verschiedene
URLs erreichbar. Dies ist ein Problem, das insbesondere bei einem
dynamischen CMS-System wie Joomla! auftritt. Sie wollen ein Beispiel?
Öffnen Sie dazu Ihre Beispielinstallation von Bauer Birnennase,
deaktivieren Sie die suchmaschinenfreundlichen URLs und rufen Sie den
Beitrag _Über den Obsthof_ auf. Sie erhalten nun eine URL wie diese
hier:
_http://localhost:8888/JoomlaBuch/index.php?option=com++_++content&view=article&id=2&Itemid=109_.
Jetzt kürzen Sie die URL so, dass nur noch der Parameter _Itemid_ übrig
bleibt: _http://localhost:8888/JoomlaBuch/index.php?Itemid=109_. Und
siehe da, der Aufruf funktioniert trotzdem, womit wir einen Inhalt unter
mehreren URLs innerhalb unserer Domain aufrufen können. Bevor Sie jetzt
in Panik ausbrechen: Auch diese Art von Duplicate Content wird von
Suchmaschinen nicht abgestraft, sondern als CMS-typisches Problem
erkannt. Die Suchmaschinen wählen dann eine der URLs für den jeweiligen
Inhalt aus und zeigen die anderen URLs in ihren Ergebnissen nicht an.
Leider ist diese Problematik durch die Grundarchitektur von Joomla!
bedingt und lässt sich daher nur dadurch umgehen, dass man
„versehentlich“ indizierte URLs über die Datei _robots.txt_ aus dem
Index entfernen lässt bzw. die Umleitungs-Erweiterung (Siehe 13.4)
nutzt.

Im Grunde genommen ist die Problematik im Fall 2 und 3 also, auch wenn
oft anders dargestellt, nicht direkt nachteilig für das Ranking, sie
kann jedoch die Optimierung in einigen Fällen erschweren.
