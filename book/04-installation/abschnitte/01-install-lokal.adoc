=== Installation in der lokalen Umgebung

Wir starten die Installation unserer Joomla!-Umgebung mit dem Download
der aktuellsten Joomla! 2.5-Version auf den Desktop. Dabei sollten Sie
stets auf die offizielle Version zurückgreifen, die Sie auf _joomla.org_
zum Download finden und keinesfalls externen Download-Portalen oder dem
Softwaremanager Ihres Webhosters trauen, da sich ihn diesen Quellen
oftmals veraltete oder modifizierte Joomla-Versionen befinden, die im
weiteren Betrieb zu Problemen führen. Das entsprechende Archiv entpacken
wir nun auf dem Desktop und benennen den entsprechenden Ordner um, damit
er einen aussagekräftigeren Namen erhält – im Zweifelsfalle bietet sich
hier der entsprechende Titel des Projekts an, für das wir die jeweilige
Seite erstellen wollen. Ich wähle „JoomlaBuch“ als Ordnername und
verschiebe den fertigen Ordner in den sog. „Docroot“ meines lokalen
Webservers (Windows: _C:/xampp/htdocs/_, OSX: _Programme/MAMP/htdocs_,
Linux: _/var/www_).

image:book/04-installation/media/2.png[book/04-installation/media/2,width=548,height=391]

BILD 4.1 Verschieben des Ordners _JoomlaBuch_ in das
_htdocs_-Verzeichnis des Webservers unter OS X

Nun legen wir noch eine leere MySQL-Datenbank für unsere Installation
an, indem wir im Browser das Tool phpMyAdmin aufrufen (XAMPP:
[.underline]#http://localhost:8888/xampp/phpMy­Admin#, MAMP:
[.underline]#http://localhost:8888/phpMyAdmin#, Linux:
[.underline]#http://localhost:8888/phpMy­Admin#) und darin, nach dem
Login als Root, den Reiter _Datenbanken_ öffnen. Hier legen wir im
unteren Bereich der Seite den Namen für die neue Datenbank an und
speichern diese durch den Klick auf Anlegen.

image:book/04-installation/media/3.png[C:++\++Users++\++hwunder++\++Desktop++\++rtf++\++4++\++Bild463.PNG,width=547,height=317]

BILD 4.2 Erstellung einer lokalen MySQL-Datenbank mittels phpMyAdmin

Nun können wir die Joomla!-Installation durch den Aufruf von
[.underline]#http://localhost:8888/JoomlaBuch# im Webbrowser starten –
sollten Sie beim Umbenennen des Ordners einen anderen Projektnamen
gewählt haben, so müssen Sie diesen im angegebenen Link entsprechend
anpassen.

Es öffnet sich der Joomla!-Installationsprozess, der mit der Auswahl der
Sprache beginnt, die während der weiteren Installation genutzt werden
soll. Direkt unterhalb der Sprachauswahl sehen Sie nun im Optimalfall
ein Formular, mit dem die ersten Grunddaten der Joomla!-Installation
erfasst werden – es sei denn, Ihre lokale Umgebung (bzw. Ihr Provider
bei der Installation auf einem Webspace) erfüllt die nötigen
Mindestvoraussetzungen für die Installation von Joomla! nicht, in diesem
Fall erhalten Sie, wie in Abbildung 4.3 sichtbar, eine Auflistung der zu
erfüllenden Parameter mit einer entsprechenden farblichen Hervorhebung.

image:book/04-installation/media/4.png[book/04-installation/media/4,width=548,height=388]

BILD 4.3 Prüfung der Serverumgebung während der Installation

Joomla! prüft dabei diverse Voraussetzungen, die in der folgenden
Tabelle 4.1 dokumentiert sind.

TABELLE 4.1 Benötigte Einstellungen in der Webserverumgebung

[width="100%",cols="65%,13%,22%",]
|===
|Parameter |Empfohlener Wert |Beschreibung

|Benötigte Einstellungen | |

|PHP-Version +
++>++= 5.3.10 |Ja |Prüft, ob die von Joomla! benötigte PHP-Version
5.3.10 (oder neuer) installiert ist

|Magic Quotes GPC aus |Ja |Prüft, ob die PHP-Option
magic++_++quotes++_++gpc ausgeschaltet ist

a|
[width="100%",cols="100%",options="header",]
!===
!Register Globals aus
!===

|Ja |Prüft, ob die PHP-Option register++_++globals ausgeschaltet ist

a|
[width="100%",cols="100%",options="header",]
!===
!Zlib-Kompressionsunterstützung
!===

|Ja |Prüft, ob PHP mit der Option --with-zlib kompiliert wurde

|XML-Unterstützung |Ja |Prüft, ob PHP ohne die Option --disable-xml
­kompiliert wurde

|Datenbank-Unterstützung |Ja |Prüft, ob PHP mit mindestens einem von
Joomla! unterstützen Datenbanktreiber (z.B. mysqli) kompiliert wurde

| | |

|MB-Sprache ist ­Standard |Ja |Prüft, ob die PHP-Direktive
_mbstring.language_ dem ­Standardwert „neutral“ entspricht

|MB String overload ist deaktiviert |Ja |Prüft, ob die PHP-Direktive
_mbstring.func++_++overload_ deaktiviert ist

|INI-Parser-Unterstützung |Ja |Prüft, ob die PHP-Funktionen
parse++_++ini++_++string() und parse++_++ini++_++file() verfügbar sind.
Falls nicht, liegt das im Regelfall daran, dass sie vom Hoster in der
php.ini über die _disable++_++functions_-Direktive deaktiviert wurden.

|JSON-Support |Ja |Prüft, ob die PHP-Funktionen json++_++encode() und
json++_++decode() verfügbar sind oder in der php.ini durch die
_disable++_++functions_-Direktive deaktiviert wurden

|configuration.php nicht schreibgeschützt |Ja |Prüft, ob es möglich ist,
die Datei _configuration.php_ im Hauptverzeichnis von Joomla! zu
erstellen. Sollte dies nicht der Fall sein, so muss die Rechtestruktur
des ­Servers korrigiert werden (siehe Kapitel 19.1.1, +
„Das www-run-Problem“).

|Empfohlene Einstellungen | |

|Safe-Mode |Aus |Prüft den Status der Konfigurationsvariablen
_safe++_++mode_ in der php.ini

|Fehler anzeigen |Aus |Prüft, ob Fehler, die bei der Ausführung des
Skripts auftreten, auf dem Bildschirm ausgegeben werden. Zuständig dafür
ist die PHP-Direktive _display++_++errors_ in der php.ini.

|Dateien hochladen |An |Überprüft, ob Dateien auf den Server hochgeladen
­werden können. PHP-Direktive: _file++_++uploads._

|Magic-Quotes-Laufzeit |Aus |Prüft, ob die PHP-Direktive
_magic++_++quotes++_++runtime_ aktiviert ist, die bei schlecht
programmierten Erweiterungen zu unerwarteten Fehlern führen kann

| | |

|Gepufferte Ausgabe |Aus |Prüft, ob die PHP-Direktive
_output++_++buffer_ aktiv ist

|Automatischer Sitzungsstart |Aus |Prüft, ob die PHP-Direktive
_session.auto++_++start_ aktiv ist

|Standard-ZIP-Unterstützung |An |Prüft, ob PHP mit der Option
--with-zlib kompiliert wurde
|===

Sollte einer der Parameter unter _Installationsprüfung_ dabei nicht den
Vorgaben entsprechen, so ist es leider nicht möglich, Joomla! auf diesem
System zu betreiben, weshalb der Installationsprozess an dieser Stelle
stoppt und Joomla! die erneute Prüfung der Umgebung anbietet..

Die _empfohlenen Einstellungen_ sollten nach Möglichkeit den Vorgaben
entsprechen, beeinflussen allerdings nicht den Betrieb des
Joomla!-Kerns, weshalb die Installation problemlos möglich ist.

Sollte einer der genannten Parameter in unserer lokalen Umgebung nicht
zu den Vorgaben passen, so können wir diesen durch eine entsprechende
Änderung in der _php.ini_ anpassen – sollte dieses Problem jedoch auf
dem Webspace des Hosters auftreten, so können die nötigen Änderungen im
Regelfall nur durch den Hoster selbst vorgenommen werden, da die
_php.ini_ außerhalb des für uns beschreibbaren Bereichs des Servers
liegt.

[width="99%",cols="14%,86%",options="header",]
|===
|CHV++_++BOX++_++ID++_++01 |
|icn001 a|
*Praxistipp:* Es gibt einen kleinen Trick, die entsprechende
_php.ini_-Datei zu finden, die für die PHP-Instanz verantwortlich ist,
in der unsere Joomla!-Installation läuft. Dafür erstellen wir als Erstes
eine Datei namens _info.php_ mit dem Inhalt ++<++?php phpinfo(); ?++>++
und legen diese ins Hauptverzeichnis unserer Joomla!-Installation.
Anschließend rufen wir die Datei über den Browser auf und können aus der
phpinfo()-Ausgabe die Pfadangabe zu _php.ini_ ablesen.

image:book/04-installation/media/8.png[book/04-installation/media/8,width=472,height=271]

BILD 4.4 Ausgabe der phpinfo() mit Pfadangabe zur _php.ini_

|===

Sind alle Voraussetzungen erfüllt, können wir mit der Installation
fortfahren. Bevor wir dabei die von Joomla benötigten Angaben eintragen,
werfen wir noch einen Blick in die GNU General Public License, kurz GNU
GPL, auf die Joomla im oberen Bereich des Bildschirms hinweist. Bei der
GPL handelt es sich um eine sog. Freie Software-Lizenz mit Copyleft, die
jedem Nutzer erlaubt, den Quellcode eines Werks, das unter der GPL
steht,

* beliebig in unveränderter Form zu vervielfältigen und zu verbreiten,
* beliebig zu verändern und zu verbreiten, solange die modifizierte
Version ebenfalls unter den Bedingungen der GPL verbreitet wird.

Es ist dabei ein weit verbreiteter Irrtum, dass GPL-lizenzierte Software
per se kostenlos verfügbar sein muss, denn dies wird von der Lizenz
nicht vorgegeben – im Lizenztext wird sogar explizit die Möglichkeit zur
kommerziellen Vermarktung eingeräumt.

Wir behalten dieses Wissen nun erst einmal im Hinterkopf und fahren,
nach der Lektüre der Lizenzbedingungen, mit der Installation fort.

Im nächsten Schritt, fordert uns Joomla dabei auf, diverse Grunddaten
anzugeben, die für die Installation benötigt werden.

image:book/04-installation/media/9.png[book/04-installation/media/9,width=548,height=569]

BILD 4.5 Erfassung der Grunddaten der Installation

Eine Beschreibung der einzelnen Parameter finden Sie in der folgenden
Tabelle:

TABELLE 4.2 Konfigurationsparameter von Schritt 1 im
Installationsprozess

[width="100%",cols="25%,75%",]
|===
|Parameter |Erklärung

|Name |Name der Website, der später als Seitentitel der Startseite, als
Überschrift im Administrationsbereich und als Absendername von E-Mails
verwendet wird. Kann später in Administrationsbereich verändert ­werden.

|Beschreibung |Meta-Beschreibungstext der Seite für Suchmaschinen

| |

|Site Offline |Versetzt die Seite nach Abschluss der Installation in den
_Offline-Modus_, damit sie nur vom Administrator betrachtet werden kann

|Administrator-E-Mail |E-Mail-Adresse des Administrators der Seite

|Adminstrator-Benutzername |Ihr gewünschter Benutzername

|Adminstrator-Passwort |Administrator-Passwort (Empfehlung: mindestens
zehn Zeichen; Klein- und Großbuchstaben, Zahlen sowie Sonderzeichen;
keine Umlaute)

| |
|===

Wir tragen hier die entsprechenden Daten ein und setzen die Installation
dann mit einem Klick auf _Weiter_ fort.

Nun wird die Konfiguration der Datenbankverbindung vorgenommen, bei der
die folgenden Parameter einzustellen sind.

TABELLE 4.3 Erklärung der Parameter der Datenbankverbindung

[width="100%",cols="24%,76%",]
|===
|Parameter |Erklärung

|Datenbanktyp a|
Derzeit unterstützt Joomla! sechs verschiedene Arten der Anbindung an
den Datenbank-Server:

_MySQLi_: verbesserte (**i**mproved) MySQL-Erweiterung für PHP –
*empfohlen*

_MySQL_: ältere MySQL-Erweiterung mit schlechterer Performance, wurde
mit PHP7 entfernt

_MySQL (PDO)_: MySQL-Erweiterung auf Basis der PDO API, etwas langsamer
als MySQLi

_PostgreSQL_: Unterstützung für den freien Datenbankserver PostgreSQL

_Microsoft SQL-Server_: Unterstützung für den MS SQL Server

_Microsoft SQL-Azure_: Unterstützung für MS SQL Server in Azure
Umgebungen

Zu beachten ist hierbei, dass die Unterstützungen für PostgreSQL sowie
den Microsoft SQL Server nur bei sehr wenigen Nutzern im Einsatz sind
und daher als fehleranfällig und instabil gelten. Aktuell wird darüber
diskutiert, die Unterstützung für MsSQL in kommenden Versionen ganz zu
entfernen.

|Servername |Name (oder IP-Adresse) des Datenbankservers. Falls nicht
anders ange­geben, ist dies im Regelfall „localhost“.

|Benutzername |Benutzername für die Datenbankverbindung. In lokalen
Umgebungen häufig „root“, auf dem Webspace ist der Name dem
Control-Panel des Hosters zu entnehmen.

|Passwort |Passwort für die Datenbankverbindung. In der lokalen Umgebung
normalerweise entweder „root“ oder gar nicht gesetzt und kann dann leer
bleiben. Auf dem Webspace ist das Passwort im Control-Panel des Hosters
zu ver­geben.

|Datenbankname |Name der Datenbank, die wir vor Installationsbeginn
erstellt haben

|Tabellenpräfix |Ermöglicht es, mehrere Joomla!-Installationen in nur
einer Datenbank zu ­betreiben, da es als Zeichenkette vor den
eigentlichen Tabellennamen ­gesetzt wird. Bis einschließlich Joomla 1.5
standardmäßig auf „jos++_++“ ­gesetzt, seitdem zufallsgeneriert, weshalb
im Normalfall keine Anpassung erforderlich ist.

|Alte Datenbanktabellen löschen |Erlaubt es, bereits vorhandene Tabellen
einer alten Joomla!-Installation (mit gleichem Tabellenpräfix) in der
gewählten Datenbank entweder zu löschen oder mit dem neuen Präfix
„bak++_++“ zu versehen und dadurch zu sichern
|===

Von Zeit zu Zeit kommt es vor, dass Joomla! den nächsten
Installationsschritt mit nicht sehr aussagekräftigen Fehlermeldungen wie
„Verbindungsfehler“ verweigert. In einem solchen Falle ist der Fehler
eigentlich immer bei falsch eingetragenen Verbindungsdaten
(Buchstabendreher, Leerzeichen oder Umlaut im Passwort oder
Benutzernamen, falscher Servername) zu suchen.

image:book/04-installation/media/11.png[book/04-installation/media/11,width=548,height=521]

BILD 4.6 Konfiguration der Datenbankverbindung während der Installation

Im Normalfall tragen wir hier aber einfach unsere
Datenbankverbindungsdaten ein und fahren durch einen Klick auf Weiter
mit der Installation fort.

In Schritt 3 der Installation fragt das System ab, mit welchem
Beispieldatensatz wir die Installation fortsetzen möchten. Zur Auswahl
stehen hierbei:

* Keine
* Englische (GB) Beispieldaten:
Bloginhalteimage:book/04-installation/media/13.png[book/04-installation/media/13,width=21,height=21]
* Englische (GB) Beispieldaten:
Prospektinhalteimage:book/04-installation/media/13.png[book/04-installation/media/13,width=21,height=21]
* Englische (GB) Beispieldaten: Standardinhalte
* image:book/04-installation/media/13.png[book/04-installation/media/13,width=21,height=21]Englische
(GB) Beispieldaten: Joomla!
erlernenimage:book/04-installation/media/13.png[book/04-installation/media/13,width=21,height=21]
* Englische (GB) Beispieldaten: Testinhalte

Im Regelfall sollten Sie hier die Option _Keine_ wählen, da die in
Joomla! integrierten Beispieldatensätze für produktive Websites ohnehin
uninteressant sind und dann händisch wieder entfernt werden müssten. Ein
weiterer Vorteil ist, dass die Installation ohne Beispieldaten uns
erlaubt, Joomla direkt für mehrsprachige Websites einzurichten.

image:book/04-installation/media/14.png[book/04-installation/media/14,width=548,height=320]

Bild 4.7 Auswahl des zu installierenden Beispieldatensatzes

Nach der Auswahl des Beispieldatensatzes können wir nochmal einen
letzten Blick auf die von uns eingegebenen Daten werfen und die
Installation anschließend mit dem Klick auf _Installieren_ starten.

Anschließend wird die Installation von Joomla! durchgeführt und nach
Abschluss des Prozesses beglückwünscht uns das System zur Bewältigung
dieser Aufgabe. Als letzter Schritt ist nun noch nötig, dass wir das
Verzeichnis _/installation_ im Joomla!-Verzeichnis löschen, damit
niemand sonst mehr das Installationstool nutzen und damit Schaden
anrichten kann. Die Löschung können wir bequem über den entsprechenden,
prominent platzierten Button (siehe Abb. 4.8) durchführen.

Nun können wir unsere neue Seite über den Klick auf den Button _Website_
aufrufen.

image:book/04-installation/media/15.png[book/04-installation/media/15,width=548,height=501]

Bild 4.8 Erfolgreicher Abschluss der Installation

Bei der Installation von Joomla gibt es jedoch zwei Sonderfälle zu
berücksichtigen, auf die ich im Folgenden noch kurz eingehen möchte.

==== Sonderfall 1: der FTP-Modus

Der erste Sonderfall begegnet uns, wenn wir Joomla! in einer Umgebung
installieren, in der das CMS aufgrund des sog. www-run-Problems (siehe
Kapitel 19.1.1, „Das www-run-Problem“) keinen Schreibzugriff auf seine
eigenen Dateien hat. Das ist insofern problematisch, als das dadurch
viele Grundfunktionen des Systems (Schreiben der Konfigurationsdatei,
Erweiterungsinstallation, Bildupload) nicht funktionieren würde. Um
dieses Problem zu umgehen, prüft Joomla im Verlauf der Installation
automatisch, ob die Dateien beschreibbar sind und fügt im im Fall der
Fälle einen neuen Schritt 3 an die Eingabe der Datenbankdaten an.

In diesem Schritt bittet Joomla! darum, dass man die Daten des
FTP-Accounts angibt, mit dem Joomla z.B. beim Webhoster hochgeladen
wurde. Joomla! nutzt dann diese Daten um eine Verbindung mit dem
FTP-Server aufzubauen und entsprechende Schreibzugriffe über diesen
Umweg durchzuführen.

Leider sind die FTP-Zugriffe enorm langsam und unzuverlässig, weshalb
die Nutzung des FTP-Modus nur im äußersten Notfall in Erwägung gezogen
werden sollte – besser ist, hier bei der Hosterauswahl auf eine
vernünftige Joomla!-Unterstützung zu achten, sodass das Problem erst
garnicht auftaucht.

Wenn man jedoch dann doch einmal vor dem genannten Problem steht, trägt
man die entsprechenden FTP-Serverdaten ein und aktiviert die
FTP-Funktion durch die Betätigung des Buttons _Ja_ im entsprechenden
Dialog (siehe Abb. 4.9).

image:book/04-installation/media/16.png[book/04-installation/media/16,width=548,height=375]

Bild 4.9 Eingabe der FTP-Zugangsdaten während der Joomla-Installation

[width="99%",cols="14%,86%",options="header",]
|===
|CHV++_++BOX++_++ID++_++01 |
|icn001 a|
*Praxistipp:* Der korrekte _FTP-Root-Pfad_ lässt sich am einfachsten
feststellen, indem man mit einem FTP-Client wie _Filezilla_ zur
entsprechenden Joomla!-Installation navigiert und dann den dort
angegebenen Pfad auf dem Server überträgt.

image:book/04-installation/media/18.png[C:++\++Users++\++hwunder++\++Desktop++\++rtf++\++4++\++Bild834.PNG,width=547,height=389]

|===

Die Angaben zu _FTP-Benutzername_ und _FTP-Passwort_ sollten in jedem
Falle leer gelassen werden, da diese ansonsten im Klartext in der
_configuration.php_ gespeichert werden, was ein potenzielles
Sicherheitsrisiko darstellen würde.

[width="100%",cols="25%,75%",]
|===
| |
| |
| |
| |
| |
| |
| |
| |
| |
|===

Wenn die Zugangsdaten für den FTP-Zugang korrekt konfiguriert sind, kann
die Installation wieder mittels Klick auf Weiter fortgesetzt werden. .

==== Sonderfall 2: Mehrsprachige Installation

Wenn man bereits zum Zeitpunkt der Installation weiß, dass die
Joomla-Website mehrsprachig werden soll, sollte im letzten Schritt
darauf geachtet werden, dass der Button _Verzeichnis „installation“
löschen_ (siehe Abb. 4.8) nicht vorschnell betätigt wird! Der
Installationsprozess kann hier nämlich über den Button _Extra Schritt:
Sprachen installieren_ direkt noch dafür genutzt werden, die benötigten
Sprachdateien nachzuinstallieren und die neue CMS-Installation für die
Verwendung von Mehrsprachigkeit vorzubereiten.

Dafür wählen Sie die gewünschten Zusatzsprachen aus (siehe Abb. 4.10)
und aktivieren im folgenden Schritt die Mehrsprachigkeitsfunktion (siehe
Abb. 4.11) und wählen die gewünschte Standardsprache aus.

image:book/04-installation/media/19.png[book/04-installation/media/19,width=548,height=376]

Bild 4.10 Auswahl der zu installierenden, zusätzlichen Sprachpakete

image:book/04-installation/media/20.png[book/04-installation/media/20,width=548,height=473]

Bild 4.11 Konfiguration der Mehrsprachigkeitsfunktion während des
Installationsprozesses

Anschließend löschen Sie auch hier das Verzeichnis _/installation_ durch
Betätigung des entsprechenden Buttons.

[width="99%",cols="14%,86%",options="header",]
|===
|CHV++_++BOX++_++ID++_++01 |
|icn001 |Sie können diesen zusätzlichen Installationsschritt nicht nur
dafür nutzen, die Mehrsprachigkeitsfunktion zu konfigurieren, sondern er
bietet sich auch zur einfachen Installation des deutschen Sprachpakets
bei einsprachigen Seiten an. Lassen sie hierfür einfach die
Mehrsprachigkeitsfunktion (Siehe Abb. 4.11) deaktiviert und setzen Sie
einfach nur die deutsche Sprache als Standard.
|===
