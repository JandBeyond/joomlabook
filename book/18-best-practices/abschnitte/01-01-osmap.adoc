==== OSMap

Die Sitemap-Erweiterung
_OSMap_footnote:[[.underline]#https://www.joomlashack.com/joomla-extensions/osmap/#],
die kostenlos unter der GPL-Lizenz zur Verfügung steht, kann dem
Administrator eine äußerst lästige Aufgabe abnehmen: die Generierung von
sogenannten XML-Sitemap-Dateien. Diese XML-Sitemaps entsprechen einem
standardisierten
Formatfootnote:[[.underline]#http://www.sitemaps.org/#], das es
Suchmaschinen wie Google oder Bing erleichtern soll, die Inhalte einer
Website zu indexieren.

Der Aufbau der Sitemap sieht wie folgt aus:

++<++?xml version="1.0" encoding="UTF-8"?++>++

++<++urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"++>++

++<++url++>++

++<++loc++>++http://www.example.com/++<++/loc++>++

++<++lastmod++>++2005-01-01++<++/lastmod++>++

++<++changefreq++>++monthly++<++/changefreq++>++

++<++priority++>++0.8++<++/priority++>++

++<++/url++>++

++<++/urlset++>++

So ist für jede auf der Website vorhandene Unterseite ein eigener
++<++url++>++...++<++/url++>++-Block hinzuzufügen und durch die Angabe
der Tags für ++<++lastmod++>++, also dem Datum der letzten Änderung,
++<++changefreq++>++, was dem durchschnittlichen Rhythmus der Änderung
an der jeweiligen URL entspricht, sowie der Priorität der jeweiligen
Seite zu ergänzen.

Bei statischen Websites ist es in der Regel notwendig, die jeweilige
Datei händisch bzw. unter Zuhilfenahme eines entsprechenden Webdienstes
zu erstellen und anschließend per FTP auf dem Server zu hinterlegen. Die
Problematik ist dabei offensichtlich: Jede Änderung an der URL-Struktur
erfordert eine manuelle Aktualisierung der XML-Sitemap.

OSMap nimmt uns diese Aufgabe durch das automatische Auslesen aller
Menüeinträge und Beiträge und das anschließende Generieren der passenden
Datei ab. Dazu öffnen wir nach der Installation von OSMap die
Konfiguration der Komponente über den Klick auf Komponenten ++>++ OSMap.

image:book/18-best-practices/media/2.png[book/18-best-practices/media/2,width=548,height=196]

BILD 18.1 Die Erweiterung OSMap nach der Installation

Neben der Umwandlung von Menüeinträgen verfügt OSMap noch über die
Funktion, „tiefer“ ins System einzutauchen und auch Inhalte zu erfassen,
die nicht über das Menü erreichbar sind. Diese Funktion bietet OSMap
standardmäßig in der Free-Version für Joomla-Beiträge und dort
eingebundene Bilder an, lässt sich jedoch über Erweiterungen auch für
andere Joomla-Komponenten anpassen.

Daher verfügt OSMap über ein Plug-in-System, das über den entsprechenden
Submenüeintrag erreicht werden kann.

image:book/18-best-practices/media/3.png[book/18-best-practices/media/3,width=548,height=135]

BILD 18.2 Die Erweiterungsübersicht von OSMap Free

Nun wechseln wir zurück in den Administrationsbereich der Komponente und
wählen mit dem Klick auf den Titel Default die bereits existierende
Standard-Sitemap aus.

image:book/18-best-practices/media/6.png[book/18-best-practices/media/6,width=548,height=347]

BILD 18.3 Konfiguration der gewünschten Sitemap

Theoretisch kann OSMap zur Verwaltung mehrere Sitemaps verwendet werden
– so wäre es z.B. denkbar, in die XML-Sitemap für Suchmaschinen alle
Inhalte auflisten zu lassen, in der Sitemap für den menschlichen
Besucher jedoch Verlinkungen eines bestimmten Menüs ausblenden zu
lassen. Um diese Auswahl zu treffen, können wir in der linken Spalte des
Dialogs auswählen, welche Menüs in die Sitemap eingebunden werden sollen
und mit welchem Wert deren Priorität in der Sitemap ausgegeben werden
soll.

Nach dem Speichern & Schliessen der Sitemap springen wir wieder auf die
Übersichtsseite von OSMap und können dort mit einem Klick auf den Link
_XML_, der neben dem jeweiligen Sitemap-Titel zu finden ist, unsere
fertige Sitemap aufrufen.

Ein Haken bleibt jedoch: Der Sitemap-Standard erwartet, dass die
XML-Sitemap als Datei mit dem Namen _sitemap.xml_ im Wurzelverzeichnis
der jeweiligen Domain (_domain.tld/sitemap.xml_) hinterlegt ist – die
Sitemap von OSMap ist jedoch unter der URL _domain.tld_
_index.php/component/osmap/?view=xml&id=1_ abzurufen. Was lässt sich
also dagegen tun?

Hier können wir uns mit einem kleinen Trick behelfen und den folgenden
Codeschnipsel hinter dem Eintrag RewriteEngine On in der _.htaccess_
unserer Joomla!-Installation hinzufügen:

RewriteCond %++{++REQUEST++_++URI} ^/sitemap.xml

RewriteRule .++*++ /index.php/component/osmap/?view=xml&id=1

Dieser Eintrag leitet die URL _domain.tld/sitemap.xml_ auf die von OSMap
generierte Datei um, sodass wir, ohne jegliches Zutun, stets eine
aktuelle Sitemap für Suchmaschinen zur Verfügung stellen.
